<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Maintenance Service Request</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap 5 & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<style>
  body { 
    background: #0f172a; 
    color: #f1f5f9; 
    font-size: 18px; /* minimum font size */
  }

  .card { 
    border-radius: 1rem; 
    box-shadow: 0 10px 30px rgba(0,0,0,.25); 
    background: #2e2e2e; /* dark gray */
    border: 1px solid #1f2937; 
    padding: 2rem;
    max-width: 1000px; /* wider form */
    margin: 0 auto;
  }

  /* Main form header */
  h1, h2, .card-header, .form-title {
    color: #ffffff !important;  /* force white */
    font-size: 1.8rem;          /* ~28–30px */
    font-weight: 800;
  }

  /* Section titles */
  .section-title {
    color: #ffffff !important;
    font-weight: 700;
    font-size: 1.25rem;
    margin-top: 1rem;
  }

  /* Labels */
  .form-label {
    color: #ffffff !important;
    font-weight: 600;
    font-size: 1rem;
  }

  /* Checkbox & radio labels */
  .form-check-label {
    color: #ffffff !important;
    font-size: 1rem;
  }

  /* Input, textarea, select */
  .form-control,
  .form-select {
    color: #ffffff !important; 
    background-color: #3a3a3a !important; 
    border: 1px solid #555;
    font-size: 1rem;
  }

  /* Placeholder text */
  .form-control::placeholder {
    color: #cbd5e1 !important; 
    opacity: 1;
    font-size: 0.95rem;
  }

  /* Hints & feedback */
  .hint,
  .form-text,
  .invalid-feedback,
  .valid-feedback,
  .char-count {
    font-size: 0.95rem;
    color: #cbd5e1 !important;
  }

  /* Required field asterisk */
  .required::after { content: " *"; color: #f87171; }

  /* Priority bar */
  .priority-out { font-weight: 700; min-width: 2ch; display: inline-block; }
  .priority-track { height: 6px; background: linear-gradient(90deg,#22c55e,#eab308,#ef4444); border-radius: 6px; }
  input[type="range"]::-webkit-slider-thumb { background: #fff; }

  /* Hide emergency banner until needed */
  .emergency-banner { display: none; }

  /* Tags */
  .badge-tag { background: #1f2937; color: #ffffff; border: 1px solid #334155; }

  /* Dividers */
  .visually-divider { border-top: 1px dashed #334155; }

  /* Invalid field highlight */
  .was-validated .form-control:invalid, 
  .was-validated .form-select:invalid {
    box-shadow: 0 0 0 .15rem rgba(239,68,68,.3);
    border-color: #ef4444;
  }
</style>



</head>
<body>
  <div class="container py-4 py-lg-5">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10 col-xxl-8">
        <div class="card p-3 p-md-4">
          <div class="d-flex align-items-center mb-3">
            <i class="bi bi-tools fs-3 me-2 text-info"></i>
            <h1 class="h3 m-0">Maintenance Service Request</h1>
          </div>

          <p class="hint mb-4">
            Tell us what’s going on so we can help fast. Please be as specific as possible and add photos/videos when you can.
          </p>

          <!-- Emergency callout toggles on priority >= 9 -->
          <div id="emergencyBanner" class="alert alert-danger emergency-banner" role="alert">
            <strong>Emergency?</strong> If there is active flooding, fire, gas smell, no heat in freezing weather, or other safety risk,
            call emergency services and our emergency line immediately after submitting this ticket.
          </div>

          <form id="ticketForm" class="needs-validation" novalidate>
            <!-- Tenant & Unit -->
            <h2 class="h5 section-title mb-3">Your Info</h2>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label required" for="fullName">Full Name</label>
                <input class="form-control" id="fullName" name="fullName" type="text" placeholder="Alex Johnson" required>
                <div class="invalid-feedback">Please enter your full name.</div>
              </div>
              <div class="col-md-6">
                <label class="form-label required" for="phone">Phone</label>
                <input class="form-control" id="phone" name="phone" type="tel" inputmode="tel" placeholder="(555) 123-4567" pattern="^[0-9\-\(\)\.\s\+]{7,}$" required>
                <div class="invalid-feedback">Please enter a valid phone number.</div>
              </div>
              <div class="col-md-6">
                <label class="form-label" for="email">Email</label>
                <input class="form-control" id="email" name="email" type="email" placeholder="alex@email.com">
                <div class="hint">Optional but helpful for updates.</div>
              </div>
              <div class="col-md-6">
                <label class="form-label required" for="contactPref">Preferred Contact</label>
                <select class="form-select" id="contactPref" name="contactPref" required>
                  <option value="" selected disabled>Choose one...</option>
                  <option value="call">Phone Call</option>
                  <option value="text">Text Message</option>
                  <option value="email">Email</option>
                </select>
                <div class="invalid-feedback">Please choose a contact method.</div>
              </div>
              <div class="col-md-8">
                <label class="form-label required" for="address">Property Address</label>
                <input class="form-control" id="address" name="address" type="text" placeholder="123 Main St, Apt 4B" required>
                <div class="invalid-feedback">Please enter the address and unit.</div>
              </div>
              <div class="col-md-4">
                <label class="form-label required" for="accessCode">Gate/Door Code (if any)</label>
                <input class="form-control" id="accessCode" name="accessCode" type="text" placeholder="e.g., #0420 or N/A" required>
                <div class="invalid-feedback">Please provide code or 'N/A'.</div>
              </div>
            </div>

            <div class="visually-divider my-4"></div>

            <!-- Issue Details -->
            <h2 class="h5 section-title mb-3">What’s the Issue?</h2>
            <div class="row g-3">
              <div class="col-lg-6">
                <label class="form-label required" for="category">Category</label>
                <select class="form-select" id="category" name="category" required>
                  <option value="" disabled selected>Select a category...</option>
                  <option>Plumbing</option>
                  <option>Electrical</option>
                  <option>HVAC (Heating/Cooling)</option>
                  <option>Appliance</option>
                  <option>Doors/Windows/Locks</option>
                  <option>Pest</option>
                  <option>Water Leak / Moisture</option>
                  <option>Structural / Safety</option>
                  <option>Other</option>
                </select>
                <div class="invalid-feedback">Please select a category.</div>
              </div>
              <div class="col-lg-6">
                <label class="form-label" for="location">Exact Location in Unit</label>
                <input class="form-control" id="location" name="location" type="text" placeholder="e.g., Bathroom—under sink; Bedroom—north wall outlet">
              </div>

              <div class="col-12">
                <label class="form-label required" for="description">Describe the Problem</label>
                <textarea class="form-control" id="description" name="description" rows="5"
                  minlength="30" maxlength="1500" placeholder="Be specific: When did it start? How often does it happen? Exact spot? Sounds/smells? Any error lights/codes? What have you tried?"
                  required></textarea>
                <div class="d-flex justify-content-between">
                  <div class="hint">Tip: Include times, noises, smells, error codes, and steps to reproduce. Minimum 30 characters.</div>
                  <div id="descCount" class="char-count">0 / 1500</div>
                </div>
                <div class="invalid-feedback">Please provide more detail (at least 30 characters).</div>
              </div>

              <div class="col-12">
                <div class="row g-3">
                  <div class="col-md-6">
                    <label class="form-label" for="started">When did you first notice this?</label>
                    <input class="form-control" id="started" name="started" type="date">
                  </div>
                  <div class="col-md-6">
                    <label class="form-label" for="frequency">How often does it happen?</label>
                    <select class="form-select" id="frequency" name="frequency">
                      <option value="" selected>Choose...</option>
                      <option>Constant</option>
                      <option>Daily</option>
                      <option>Several times a week</option>
                      <option>Intermittent / Random</option>
                      <option>Only at certain times (describe in notes)</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- “Prove it” checklist nudges -->
              <div class="col-12">
                <label class="form-label">Helpful Checks (if applicable)</label>
                <div class="row g-2">
                  <div class="col-md-6">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="checkBreaker">
                      <label class="form-check-label" for="checkBreaker">Electrical: Checked breaker/GFCI and tried a different outlet</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="checkWater">
                      <label class="form-check-label" for="checkWater">Plumbing: Turned off water to fixture (if leaking) and placed a bucket/towels</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="checkFilter">
                      <label class="form-check-label" for="checkFilter">HVAC: Replaced/checked air filter and thermostat is on/has batteries</label>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="checkModel">
                      <label class="form-check-label" for="checkModel">Captured brand/model/serial or error code (add in notes/photos)</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="checkPhotos">
                      <label class="form-check-label" for="checkPhotos">Attached clear photos/videos that show the problem</label>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Priority -->
              <div class="col-12">
                <label class="form-label required" for="priorityRange">
                  Priority (1–10): <span class="priority-out" id="priorityOut">5</span>
                </label>
                <div class="priority-track mb-2"></div>
                <input type="range" class="form-range" min="1" max="10" step="1" value="5" id="priorityRange" name="priority" required>
                <div class="d-flex justify-content-between">
                  <span class="badge badge-tag">1 — Not urgent</span>
                  <span class="badge badge-tag">5 —Important</span>
                  <span class="badge badge-tag">10 — Emergency</span>
                </div>
              </div>
            </div>

            <div class="visually-divider my-4"></div>

            <!-- Photos / Video -->
            <h2 class="h5 section-title mb-3">Photos / Video</h2>
            <div class="row g-3">
              <div class="col-12">
                <label class="form-label" for="media">Attach up to 5 files</label>
                <input class="form-control" id="media" name="media" type="file" accept="image/*,video/*" multiple>
                <div class="hint">Good lighting helps. Show the whole area + a close-up. Video is great for noises.</div>
              </div>
              <div id="mediaPreview" class="row g-2"></div>
            </div>

            <div class="visually-divider my-4"></div>

            <!-- Access & Safety -->
            <h2 class="h5 section-title mb-3">Access & Safety</h2>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label required">May maintenance enter with key if you’re not home?</label>
                <div class="d-flex gap-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="enter" id="enterYes" value="yes" required>
                    <label class="form-check-label" for="enterYes">Yes</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="enter" id="enterNo" value="no" required>
                    <label class="form-check-label" for="enterNo">No</label>
                  </div>
                </div>
                <div class="invalid-feedback">Please choose yes or no.</div>
              </div>
              <div class="col-md-6">
                <label class="form-label required" for="availability">Best Times (select all that work)</label>
                <select class="form-select" id="availability" name="availability" multiple required>
                  <option>Weekdays: 9am–12pm</option>
                  <option>Weekdays: 12pm–3pm</option>
                  <option>Weekdays: 3pm–6pm</option>
                  <option>Saturday</option>
                  <option>Any time (with notice)</option>
                </select>
                <div class="hint">Hold Ctrl (Cmd on Mac) to choose multiple.</div>
                <div class="invalid-feedback">Please select at least one option.</div>
              </div>
              <div class="col-md-6">
                <label class="form-label required">Pets in unit?</label>
                <div class="d-flex flex-wrap gap-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="pets" id="petsNo" value="no" required>
                    <label class="form-check-label" for="petsNo">No</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="pets" id="petsYes" value="yes" required>
                    <label class="form-check-label" for="petsYes">Yes (add notes)</label>
                  </div>
                </div>
                <div class="invalid-feedback">Please let us know about pets.</div>
              </div>
              <div class="col-md-6">
                <label class="form-label" for="specialNotes">Access Notes / Special Instructions</label>
                <input class="form-control" id="specialNotes" name="specialNotes" type="text" placeholder="Alarm code, gate instructions, pet details, parking notes">
              </div>
            </div>

            <div class="visually-divider my-4"></div>

            <!-- Consent -->
            <div class="form-check mb-3">
              <input class="form-check-input" type="checkbox" id="consent" required>
              <label class="form-check-label" for="consent">
                I confirm the information is accurate and understand this creates a maintenance ticket.
              </label>
              <div class="invalid-feedback">Please confirm to submit.</div>
            </div>

            <!-- Actions -->
            <div class="d-flex gap-2">
              <button class="btn btn-info" type="submit">
                <i class="bi bi-send me-1"></i> Submit Request
              </button>
              <button class="btn btn-outline-secondary" type="button" onclick="window.print()">
                <i class="bi bi-printer me-1"></i> Print
              </button>
              <button class="btn btn-outline-light ms-auto" type="reset">
                <i class="bi bi-eraser me-1"></i> Clear
              </button>
            </div>

            <!-- Success feedback (client-side demo) -->
            <div id="successMsg" class="alert alert-success mt-3 d-none" role="alert">
              Thank you! Your maintenance request has been recorded. We’ll reach out shortly.
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS (for better form UX) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Character counter for description
    const description = document.getElementById('description');
    const descCount = document.getElementById('descCount');
    const updateCount = () => descCount.textContent = `${description.value.length} / ${description.maxLength}`;
    description.addEventListener('input', updateCount);
    updateCount();

    // Priority live output + emergency banner
    const priorityRange = document.getElementById('priorityRange');
    const priorityOut = document.getElementById('priorityOut');
    const emergencyBanner = document.getElementById('emergencyBanner');

    function updatePriorityUI() {
      const val = parseInt(priorityRange.value, 10);
      priorityOut.textContent = val;
      emergencyBanner.style.display = (val >= 9) ? 'block' : 'none';
    }
    priorityRange.addEventListener('input', updatePriorityUI);
    updatePriorityUI();

    // Media preview (images only shown as thumbs; videos listed by name)
    const media = document.getElementById('media');
    const mediaPreview = document.getElementById('mediaPreview');
    media.addEventListener('change', () => {
      mediaPreview.innerHTML = '';
      const files = Array.from(media.files).slice(0, 5);
      files.forEach(file => {
        const col = document.createElement('div');
        col.className = 'col-6 col-md-4 col-lg-3';
        if (file.type.startsWith('image/')) {
          const img = document.createElement('img');
          img.className = 'img-fluid rounded border border-1 border-secondary';
          img.alt = file.name;
          const reader = new FileReader();
          reader.onload = e => img.src = e.target.result;
          reader.readAsDataURL(file);
          col.appendChild(img);
        } else {
          col.innerHTML = `<div class="p-2 border rounded text-truncate small">${file.name}</div>`;
        }
        mediaPreview.appendChild(col);
      });
    });

    // Basic Bootstrap/HTML5 validation + demo success message
    (function () {
      const form = document.getElementById('ticketForm');
      form.addEventListener('submit', function (event) {
        form.classList.add('was-validated');
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
          return;
        }
        // Demo success UI (replace with real submit via fetch/XHR)
        event.preventDefault();
        document.getElementById('successMsg').classList.remove('d-none');
        window.scrollTo({ top: 0, behavior: 'smooth' });
        // Example: send data via fetch to your endpoint
        // fetch('/api/maintenance', { method: 'POST', body: new FormData(form) })
      }, false);
    })();
  </script>
</body>
</html>
